generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model  duration         Int
  endDate          DateTime? @db.Date
  maxSlots         Int
  startDate        DateTime? @db.Date
  eventID          BigInt    @id @default(autoincrement())
  category         String?   @db.VarChar(255)
  description      String?   @db.Text
  pricePerCategory String?   @db.VarChar(255)
  name             String    @db.VarChar(255)
  venueID          BigInt?
  displayImage     String?   @db.VarChar(255)

  @@index([venueID], map: "FKfkg0rjjt6ca7ck5mojidks7r7")
}

model payment {
  isSuccessful  Int
  paymentID     BigInt  @id @default(autoincrement())
  paymentMethod String? @db.VarChar(255)
  orderID       BigInt?
  transactionID BigInt?

  @@index([orderID], map: "FKb33lw05499g9grnvp6ufpjjwg")
  @@index([transactionID], map: "FKmuaxt57agmtuiovehhauvchmq")
}

model ticket {
  uniqueCode String? @db.VarChar(255)
  orderID    BigInt?
  seatID     BigInt?
  ticketID   BigInt  @id @default(autoincrement())

  @@index([seatID], map: "FKjuy4c1esbrpokuwgg5v2fuudt")
  @@index([orderID], map: "FKks8gd5eaa20qau296r9fgcc9n")
}

model transaction {
  date          DateTime? @db.DateTime(6)
  buyerID       BigInt?
  sellerID      BigInt?
  ticketID      BigInt?
  transactionID BigInt    @id @default(autoincrement())

  @@index([sellerID], map: "FK2nlddhdsd1n20718nunwqyp69")
  @@index([buyerID], map: "FK7j96qpqvnqa1wplxx8g64t1x4")
  @@index([ticketID], map: "FKdcjhq8tyb6mwfawkmomggmlag")
}

model user {
  contactNum   String?    @db.VarChar(255)
  userID       BigInt     @id @default(autoincrement())
  address      String?    @db.VarChar(255)
  email        String     @db.VarChar(255)
  name         String?    @db.VarChar(255)
  password     String     @db.VarChar(255)
  role         user_role?
  stripeUserID String?    @db.VarChar(255)
}

model venue {
  capacity Int
  name     String? @db.VarChar(255)
  venueID  BigInt  @id @default(autoincrement())
}

model custorder {
  orderID        BigInt    @id @default(autoincrement())
  ticketQuantity Int
  eventID        BigInt?
  userID         BigInt?
  ticketCategory String?   @db.VarChar(255)
  date           DateTime? @db.Date
  price          Int

  @@index([userID], map: "FKi095hldqf17n9kcpp26ghex2o")
  @@index([eventID], map: "FKr6tkc9du1r50obuqt1h761d2y")
}

model seat {
  seatID   BigInt  @id @default(autoincrement())
  category String? @db.VarChar(255)
  seatRow  String? @db.VarChar(255)
  seatNo   Int
  section  String? @db.VarChar(255)
  venueID  BigInt?

  @@index([venueID], map: "FKfj8lt431up6yqyeakinimp591")
}

model run {
  runID          BigInt    @id
  date           DateTime? @db.Date
  endTime        String?   @db.VarChar(255)
  startTime      String?   @db.VarChar(255)
  eventID        BigInt?
  marketplace_id BigInt?   @unique(map: "UK_bmke6kuuntpjbd88yu4cju2ie")

  @@index([eventID], map: "FKni6xubxc2bq4lmaxubip68iy4")
}

model ticketlisting {
  listingID     BigInt    @id @default(autoincrement())
  listingDate   DateTime? @db.DateTime(6)
  price         Float
  quantity      Int
  status        String?   @db.VarChar(255)
  ticketID      BigInt?
  transactionID BigInt?   @unique(map: "UK_4vy5x6o4q6m3y4rppqavccbn2")
  userID        BigInt?
  eventID       BigInt?
  runID         BigInt?

  @@index([runID], map: "FK19h0ku2x5pr7s75w0s7sbon6g")
  @@index([userID], map: "FKnflg4egmodkj1gmynr3s0fpkh")
  @@index([eventID], map: "FKooydwf1a56axoqvpgt3ovokts")
  @@index([ticketID], map: "FKpqqii5jlk6yp4hrcfehu7hrc")
}

model marketplace {
  marketplaceID BigInt    @id
  closingDate   DateTime? @db.Date
  openingDate   DateTime? @db.Date
  status        String?   @db.VarChar(255)

  @@index([eventID], map: "FKooydwf1a56axoqvpgt3ovokts")
  @@index([ticketID], map: "FKpqqii5jlk6yp4hrcfehu7hrc")
@@index([eventID], map: "FKooydwf1a56axoqvpgt3ovokts")
  @@index([ticketID], map: "FKpqqii5jlk6yp4hrcfehu7hrc")
}

enum user_role {
  ADMIN
  USER
}
